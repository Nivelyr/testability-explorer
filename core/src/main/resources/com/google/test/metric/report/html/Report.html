<#include "costDetailBox.html" />
<html>
<head>
  <title>${message("report.title")}</title>
  <link href="te.css" rel="stylesheet" type="text/css">
  <style type="text/css">
    <#include "te.css"/>
  </style>
  <script type="text/javascript">
    <#include "report.js"/>
  </script>
</head>
<body>
<h1>${message("report.title")}</h1>

<div id="timestamp">
  ${message("report.timestamp", now)}
</div>

<div style="margin-top: 32px;">
  <div style="padding-bottom: 24px; font-weight: bold; font-size: 120%">Overall score:
         <span style="font-weight: normal">${overall}<span class="smaller">
             (<a href="TODO">what is this?</a>)</span></span></div>
  <div style="float: left;">
    ${pieChart}
  </div>
  <div style="float: left;">
    ${overallChart}
  </div>
  <div style="border: 1px solid #cc6; background: #ffd; padding: 8px; margin-left: 16px; float: left;">
    <table class="overview_table">
      <tr>
        <th>Analyzed classes</th>
        <th class="value">${total}</th>
        <th class="percent">&nbsp;</th>
      </tr>
      <tr>
        <td> - Excellent</td>
        <td class="value">${excellentCount}</td>
        <td class="percent">${(excellentCount / total)?string.percent}</td>
      </tr>

      <tr>
        <td> - Good</td>
        <td class="value">${goodCount}</td>
        <td class="percent">${(goodCount / total)?string.percent}</td>
      </tr>
      <tr>
        <td> - Needs work</td>
        <td class="value">${needsWorkCount}</td>
        <td class="percent">${(needsWorkCount / total)?string.percent}</td>
      </tr>
    </table>
  </div>

  <div style="clear:both; width: 0">&nbsp;</div>
</div>

<div style="margin-bottom: 32px; margin-left: 32px; margin-top: 16px;">
  ${histogram}
</div>

<h2 style="margin-bottom: 12px;">Least Testable Classes</h2>

<#list worstOffenders as classIssues>
  <table style="border: 1px solid black">
    <tr><td>
      ${classIssues.totalCost}
      <strong>${message("report.explain.class.hardToTest", "<tt>", classIssues.className, "</tt>")}</strong>
      <br/>
      <#if !classIssues.constructionIssues.empty>
        <em>${message("report.explain.class.construction")}</em>
        <@costDetailBox classIssues.constructionIssues classIssues.path/>
      </#if>

      <#if !classIssues.collaboratorIssues.empty>
        <em>${message("report.explain.class.collaborators")}</em>
        <@costDetailBox classIssues.collaboratorIssues classIssues.path/>
      </#if>

      <#if !classIssues.directCostIssues.empty>
        <em>${message("report.explain.class.directCost")}</em>
        <@costDetailBox classIssues.directCostIssues classIssues.path/>
      </#if>

      <input type="button" value="Show more suggestions"/><br/>
      <p>${message("report.explain.class.benefits", "<b>", 0.38, "</b>")}</p>
    </td></tr>
  </table>
</#list>
<div style="text-align: center; margin-top: 32px;">
  <a href="http://testabilityexplorer.org">http://testabilityexplorer.org</a></div>
</body>
</html>
